============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-7.4.3, pluggy-1.6.0 -- /home/jhonslife/Didin Facil/backend/venv/bin/python3
cachedir: .pytest_cache
rootdir: /home/jhonslife/Didin Facil/backend
configfile: pytest.ini
plugins: asyncio-0.21.1, anyio-3.7.1, cov-4.1.0
asyncio: mode=Mode.AUTO
collecting ... collected 859 items

backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_create_account PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_create_duplicate_account PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_get_account PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_get_account_not_found PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_list_accounts PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_list_accounts_by_platform PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_update_account PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_delete_account PASSED [  0%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_switch_account PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_get_active_account PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_get_active_fallback_to_primary PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_update_metrics PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestMultiAccountService::test_get_summary PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestAccountRoutes::test_list_accounts_endpoint PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestAccountRoutes::test_get_summary_endpoint PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestAccountValidation::test_account_create_validation PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestAccountValidation::test_account_username_too_long PASSED [  1%]
backend/tests/unit/test_accounts_routes.py::TestAccountValidation::test_account_status_enum PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestAnalyticsOverview::test_get_overview_empty_data PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestAnalyticsOverview::test_get_overview_with_data PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestPlatformAnalytics::test_get_platform_instagram PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestPlatformAnalytics::test_get_platform_all_raises_error PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestDailyStats::test_get_daily_empty PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestDailyStats::test_get_daily_with_data PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestRecordMetrics::test_record_metrics_success PASSED [  2%]
backend/tests/unit/test_analytics_routes.py::TestGrowthStats::test_get_growth_no_data PASSED [  3%]
backend/tests/unit/test_analytics_routes.py::TestGrowthStats::test_get_growth_with_data PASSED [  3%]
backend/tests/unit/test_analytics_routes.py::TestTopPosts::test_get_top_posts PASSED [  3%]
backend/tests/unit/test_analytics_routes.py::TestAnalyticsService::test_record_post PASSED [  3%]
backend/tests/unit/test_analytics_routes.py::TestAnalyticsService::test_get_platform_metrics PASSED [  3%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_get_api_categories PASSED [  3%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_get_category_endpoints_valid PASSED [  3%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_get_category_endpoints_by_path PASSED [  3%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_get_category_endpoints_not_found PASSED [  3%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_search_endpoints PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_search_endpoints_no_results PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_get_api_overview PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocsRoutes::test_get_interactive_docs PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocumentation::test_all_categories_have_required_fields PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocumentation::test_endpoints_have_valid_methods PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocumentation::test_examples_have_required_fields PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocumentation::test_total_endpoints_count PASSED [  4%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocumentation::test_authentication_category_exists PASSED [  5%]
backend/tests/unit/test_api_docs_routes.py::TestAPIDocumentation::test_social_media_categories_exist PASSED [  5%]
backend/tests/unit/test_api_docs_routes.py::TestEndpointModels::test_endpoint_example_model PASSED [  5%]
backend/tests/unit/test_api_docs_routes.py::TestEndpointModels::test_endpoint_example_optional_fields PASSED [  5%]
backend/tests/unit/test_api_docs_routes.py::TestEndpointModels::test_endpoint_doc_model PASSED [  5%]
backend/tests/unit/test_api_docs_routes.py::TestEndpointModels::test_api_category_model PASSED [  5%]
backend/tests/unit/test_api_redis_service.py::test_redis_pool_singleton PASSED [  5%]
backend/tests/unit/test_api_redis_service.py::test_redis_pool_close PASSED [  5%]
backend/tests/unit/test_api_redis_service.py::test_redis_pool_close_not_initialized PASSED [  5%]
backend/tests/unit/test_api_redis_service.py::test_get_redis_pool_wrapper PASSED [  6%]
backend/tests/unit/test_api_redis_service.py::test_close_redis_pool_wrapper PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestCreateAccessToken::test_create_access_token_basic PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestCreateAccessToken::test_create_access_token_payload_structure PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestGetUserById::test_get_user_by_id_found PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestGetUserById::test_get_user_by_id_not_found PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestGetCurrentUser::test_get_current_user_valid_token PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestGetCurrentUser::test_get_current_user_invalid_token PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestGetCurrentUser::test_get_current_user_no_sub_in_payload PASSED [  6%]
backend/tests/unit/test_auth_middleware.py::TestGetCurrentUser::test_get_current_user_expired_token PASSED [  7%]
backend/tests/unit/test_auth_middleware.py::TestGetCurrentUser::test_get_current_user_user_not_found PASSED [  7%]
backend/tests/unit/test_auth_middleware.py::TestJWTConstants::test_jwt_secret_key_exists PASSED [  7%]
backend/tests/unit/test_auth_middleware.py::TestJWTConstants::test_jwt_algorithm_is_hs256 PASSED [  7%]
backend/tests/unit/test_auth_middleware.py::TestJWTConstants::test_security_is_http_bearer PASSED [  7%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_hash_password_returns_hash PASSED [  7%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_hash_password_different_for_same_input PASSED [  7%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_verify_password_correct PASSED [  7%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_verify_password_incorrect PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_authenticate_valid_credentials PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_authenticate_invalid_password PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_not_found PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_authenticate_inactive_user PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_validate_hwid_first_device PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_validate_hwid_existing_device PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_validate_hwid_max_devices_reached PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_validate_hwid_no_license PASSED [  8%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_create_user_success PASSED [  9%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_create_user_password_is_hashed PASSED [  9%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_create_token_valid PASSED [  9%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_create_token_includes_claims PASSED [  9%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_verify_empty_password PASSED [  9%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_hash_unicode_password PASSED [  9%]
backend/tests/unit/test_auth_service.py::TestAuthService::test_hash_very_long_password PASSED [  9%]
backend/tests/unit/test_blacklist_service.py::test_blacklist_service_init PASSED [  9%]
backend/tests/unit/test_blacklist_service.py::test_blacklist_add PASSED  [ 10%]
backend/tests/unit/test_blacklist_service.py::test_blacklist_is_blacklisted_true PASSED [ 10%]
backend/tests/unit/test_blacklist_service.py::test_blacklist_is_blacklisted_false PASSED [ 10%]
backend/tests/unit/test_blacklist_service.py::test_add_multiple_tokens PASSED [ 10%]
backend/tests/unit/test_bot_routes.py::TestVerifyPremiumAccess::test_verify_premium_access_no_license PASSED [ 10%]
backend/tests/unit/test_bot_routes.py::TestVerifyPremiumAccess::test_verify_premium_access_wrong_plan PASSED [ 10%]
backend/tests/unit/test_bot_routes.py::TestVerifyPremiumAccess::test_verify_premium_access_success PASSED [ 10%]
backend/tests/unit/test_bot_routes.py::TestDependencies::test_get_queue_manager_creates_singleton PASSED [ 10%]
backend/tests/unit/test_bot_routes.py::TestDependencies::test_get_profile_manager_creates_singleton PASSED [ 10%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_post_product_no_data PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_post_product_with_data PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_manage_orders_print_labels PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_manage_orders_process_returns PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_manage_orders_default PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_reply_messages PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_analytics_top_products PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_analytics_orders_summary PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_analytics_default PASSED [ 11%]
backend/tests/unit/test_bot_routes.py::TestBuildTaskDescription::test_build_unknown_task_type PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestTaskEndpoints::test_start_task_success PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestTaskEndpoints::test_get_task_success PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestTaskEndpoints::test_get_task_not_found PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestTaskEndpoints::test_list_tasks_success PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestTaskEndpoints::test_cancel_task_success PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestTaskEndpoints::test_cancel_task_not_found PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestStatsEndpoint::test_get_stats_success PASSED [ 12%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_create_profile_success PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_create_profile_with_clone PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_create_profile_clone_not_found PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_list_profiles_success PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_delete_profile_success PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_delete_profile_not_found PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_verify_profile_login_success PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_verify_profile_login_not_logged PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestProfileEndpoints::test_verify_profile_not_found PASSED [ 13%]
backend/tests/unit/test_bot_routes.py::TestBotControlEndpoints::test_start_bot_success PASSED [ 14%]
backend/tests/unit/test_bot_routes.py::TestBotControlEndpoints::test_stop_bot_success PASSED [ 14%]
backend/tests/unit/test_bot_routes.py::TestModels::test_start_task_request_defaults PASSED [ 14%]
backend/tests/unit/test_bot_routes.py::TestModels::test_task_response_model PASSED [ 14%]
backend/tests/unit/test_bot_routes.py::TestModels::test_profile_request_model PASSED [ 14%]
backend/tests/unit/test_bot_routes.py::TestModels::test_profile_response_model PASSED [ 14%]
backend/tests/unit/test_bot_routes.py::TestModels::test_queue_stats_response_model PASSED [ 14%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_cache_prefix PASSED [ 14%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_get_returns_none_when_not_found PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_get_returns_parsed_json PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_set_stores_json PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_delete_key PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_exists_true PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_exists_false PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_ttl PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_incr PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_delete_pattern PASSED [ 15%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_get_or_set_cache_hit PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestCacheService::test_get_or_set_cache_miss PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestCacheServiceKeyBuilders::test_build_products_cache_key PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestCacheServiceKeyBuilders::test_build_products_cache_key_consistency PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestCacheServiceKeyBuilders::test_build_products_cache_key_uniqueness PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestCacheServiceKeyBuilders::test_build_copy_cache_key PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestCacheServiceKeyBuilders::test_build_copy_cache_key_consistency PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestRateLimitService::test_rate_limit_first_request PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestRateLimitService::test_rate_limit_within_limit PASSED [ 16%]
backend/tests/unit/test_cache_service.py::TestRateLimitService::test_rate_limit_exceeded PASSED [ 17%]
backend/tests/unit/test_cache_service.py::TestRateLimitService::test_get_remaining_no_requests PASSED [ 17%]
backend/tests/unit/test_cache_service.py::TestRateLimitService::test_get_remaining_with_usage PASSED [ 17%]
backend/tests/unit/test_cache_service.py::TestCreditsService::test_get_cached_credits_not_found PASSED [ 17%]
backend/tests/unit/test_cache_service.py::TestCreditsService::test_get_cached_credits_found PASSED [ 17%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_client_no_token PASSED [ 17%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_list_inboxes PASSED [ 17%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_list_inboxes_error PASSED [ 17%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_create_contact PASSED [ 18%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_create_contact_error PASSED [ 18%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_send_message PASSED [ 18%]
backend/tests/unit/test_chatwoot_routes.py::test_chatwoot_send_message_error PASSED [ 18%]
backend/tests/unit/test_checkout_routes.py::TestCheckoutCreate::test_create_checkout_pix_success PASSED [ 18%]
backend/tests/unit/test_checkout_routes.py::TestCheckoutCreate::test_create_checkout_card_success PASSED [ 18%]
backend/tests/unit/test_checkout_routes.py::TestCheckoutCreate::test_create_checkout_invalid_product PASSED [ 18%]
backend/tests/unit/test_checkout_routes.py::TestCheckoutCreate::test_create_checkout_with_valid_coupon PASSED [ 18%]
backend/tests/unit/test_checkout_routes.py::TestCheckoutCreate::test_create_checkout_payment_error PASSED [ 18%]
backend/tests/unit/test_checkout_routes.py::TestCouponValidation::test_validate_coupon_success PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestCouponValidation::test_validate_coupon_invalid_code PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestCouponValidation::test_validate_coupon_invalid_product PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestCouponValidation::test_validate_coupon_expired PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestPaymentStatus::test_get_status_pending PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestProductList::test_list_products PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestPaymentRedirects::test_payment_success_approved PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestPaymentRedirects::test_payment_success_not_approved PASSED [ 19%]
backend/tests/unit/test_checkout_routes.py::TestPaymentRedirects::test_payment_failure PASSED [ 20%]
backend/tests/unit/test_checkout_routes.py::TestPaymentRedirects::test_payment_pending_pix PASSED [ 20%]
backend/tests/unit/test_checkout_routes.py::TestPaymentRedirects::test_payment_pending_boleto PASSED [ 20%]
backend/tests/unit/test_content_routes.py::test_generate_product_video_success PASSED [ 20%]
backend/tests/unit/test_content_routes.py::test_generate_product_video_failure PASSED [ 20%]
backend/tests/unit/test_content_routes.py::test_generate_text_video_success PASSED [ 20%]
backend/tests/unit/test_content_routes.py::test_generate_deal_alert_success PASSED [ 20%]
backend/tests/unit/test_content_routes.py::test_generate_product_video_landscape PASSED [ 20%]
backend/tests/unit/test_content_routes.py::test_generate_product_video_square PASSED [ 20%]
backend/tests/unit/test_database_connection.py::TestDatabaseConnection::test_init_database PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestDatabaseConnection::test_close_database PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestGetDb::test_get_db_yields_database PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestDatabaseManager::test_manager_init PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestDatabaseManager::test_manager_transaction PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestDatabaseManager::test_manager_execute PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestDatabaseManager::test_manager_fetch_one PASSED [ 21%]
backend/tests/unit/test_database_connection.py::TestDatabaseManager::test_manager_fetch_all PASSED [ 21%]
backend/tests/unit/test_instagram_routes.py::test_instagram_login_success PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_login_failure PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_login_exception PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_upload_not_logged_in PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_upload_photo_success PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_upload_video_success PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_upload_reel_success PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_upload_invalid_media_type PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_login_2fa_challenge PASSED [ 22%]
backend/tests/unit/test_instagram_routes.py::test_instagram_login_sms_challenge PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_login_email_challenge PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_resolve_challenge_no_pending PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_resolve_challenge_success PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_resolve_challenge_invalid_code PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_request_challenge_success PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_request_challenge_failed PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_request_challenge_exception PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_list_sessions PASSED [ 23%]
backend/tests/unit/test_instagram_routes.py::test_instagram_get_session_found PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_get_session_not_found PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_backup_session_success PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_backup_session_not_found PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_backup_session_failed PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_restore_session_success PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_restore_session_no_backup PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_restore_session_invalid PASSED [ 24%]
backend/tests/unit/test_instagram_routes.py::test_instagram_delete_session PASSED [ 25%]
backend/tests/unit/test_instagram_routes.py::test_instagram_delete_session_with_backups PASSED [ 25%]
backend/tests/unit/test_instagram_routes.py::test_instagram_list_challenges PASSED [ 25%]
backend/tests/unit/test_instagram_routes.py::test_instagram_get_challenge_found PASSED [ 25%]
backend/tests/unit/test_instagram_routes.py::test_instagram_get_challenge_not_found PASSED [ 25%]
backend/tests/unit/test_instagram_routes.py::test_instagram_health PASSED [ 25%]
backend/tests/unit/test_instagram_routes.py::test_instagram_upload_load_session_failed PASSED [ 25%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_2fa_challenge PASSED [ 25%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_sms_challenge PASSED [ 25%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_email_challenge PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_phone_call_challenge PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_captcha_challenge PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_suspicious_login PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_rate_limit PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_rate_limit_hours PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_action_blocked PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_checkpoint PASSED [ 26%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_detect_unknown PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestDetectChallengeType::test_extract_email_hint PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_backup_session_success PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_backup_session_failure PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_restore_session_success PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_restore_session_no_backup PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_get_session PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_get_session_not_found PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_get_all_sessions PASSED [ 27%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_record_challenge PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_get_challenge_by_id PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_get_active_challenges PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_get_active_challenges_by_username PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_update_challenge_status PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_update_challenge_not_found PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_increment_challenge_attempts PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramSessionManager::test_detect_challenge_type_method PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramChallenge::test_create_challenge_with_defaults PASSED [ 28%]
backend/tests/unit/test_instagram_session.py::TestInstagramChallenge::test_challenge_serialization PASSED [ 29%]
backend/tests/unit/test_instagram_session.py::TestInstagramChallenge::test_challenge_deserialization PASSED [ 29%]
backend/tests/unit/test_instagram_session.py::TestInstagramSession::test_create_session PASSED [ 29%]
backend/tests/unit/test_instagram_session.py::TestInstagramSession::test_session_with_dates PASSED [ 29%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_license_by_email_found PASSED [ 29%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_license_by_email_not_found PASSED [ 29%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_license_by_key_found PASSED [ 29%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_license_by_key_not_found PASSED [ 29%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_license_by_user_found PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_license_by_user_not_found PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_validate_hwid_valid PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_validate_hwid_invalid PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_active_devices_with_devices PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_get_active_devices_empty PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_register_device_new PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_register_device_upsert PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_deactivate_device_success PASSED [ 30%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_deactivate_device_not_found PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseService::test_deactivate_device_with_reason PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseServiceKeyGeneration::test_generate_license_key_format PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseServiceKeyGeneration::test_generate_license_key_uniqueness PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseCreation::test_create_license_new_user PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseCreation::test_create_license_existing_user PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseCreation::test_create_license_with_payment_id PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseCreation::test_activate_license_success PASSED [ 31%]
backend/tests/unit/test_license_service.py::TestLicenseCreation::test_extend_license PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestLicenseCreation::test_deactivate_license PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestCreditsManagement::test_add_credits_to_user PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestCreditsManagement::test_add_credits_user_not_found PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestPlanFeatures::test_get_plan_features_lifetime PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestPlanFeatures::test_get_plan_features_free PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestPlanFeatures::test_get_plan_features_unknown PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestLicenseServiceEdgeCases::test_validate_hwid_with_empty_string PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestLicenseServiceEdgeCases::test_get_license_by_email_with_special_chars PASSED [ 32%]
backend/tests/unit/test_license_service.py::TestLicenseServiceEdgeCases::test_register_device_with_long_hwid PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_list_marketplaces_returns_all_marketplaces PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_list_marketplaces_structure PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_success PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_with_pagination PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_with_price_filters PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_invalid_marketplace PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_unavailable PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_query_too_short PASSED [ 33%]
backend/tests/unit/test_marketplaces_routes.py::test_search_marketplace_error PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_compare_marketplaces_success PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_compare_marketplaces_with_specific_list PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_compare_marketplaces_with_per_page PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_compare_marketplaces_invalid_marketplace PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_compare_marketplaces_error PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_find_best_deal_success PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_find_best_deal_with_criteria PASSED [ 34%]
backend/tests/unit/test_marketplaces_routes.py::test_find_best_deal_not_found PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_find_best_deal_error PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_product_details_success PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_product_details_invalid_marketplace PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_product_details_unavailable_marketplace PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_product_details_not_found PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_product_details_error PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_categories_success PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_categories_with_parent PASSED [ 35%]
backend/tests/unit/test_marketplaces_routes.py::test_get_categories_invalid_marketplace PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_get_categories_unavailable_marketplace PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_get_categories_error PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_product_response_from_product PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_product_response_without_optional_fields PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_search_with_sort_options PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_search_max_per_page PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_search_exceeds_max_per_page PASSED [ 36%]
backend/tests/unit/test_marketplaces_routes.py::test_compare_max_per_page PASSED [ 37%]
backend/tests/unit/test_marketplaces_routes.py::test_best_deal_rating_boundaries PASSED [ 37%]
backend/tests/unit/test_marketplaces_routes.py::test_comparison_returns_errors_dict PASSED [ 37%]
backend/tests/unit/test_marketplaces_routes.py::test_comparison_without_best_values PASSED [ 37%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_get_payment_success PASSED [ 37%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_get_payment_with_correct_url PASSED [ 37%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_get_subscription_success PASSED [ 37%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_get_authorized_payment_success PASSED [ 37%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_create_payment_success PASSED [ 37%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_create_payment_payload_structure PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_create_subscription_raises_not_implemented PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_create_license_payment_success PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_create_license_payment_uses_correct_url PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_create_license_payment_external_reference PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_cancel_subscription_success PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_cancel_subscription_failure PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_log_event_success PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_log_event_stores_event_type PASSED [ 38%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_send_license_email PASSED [ 39%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_get_payment_history_with_results PASSED [ 39%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoService::test_get_payment_history_empty PASSED [ 39%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoServiceEdgeCases::test_get_payment_raises_on_http_error PASSED [ 39%]
backend/tests/unit/test_mercadopago_service.py::TestMercadoPagoServiceEdgeCases::test_create_payment_with_special_chars_in_email PASSED [ 39%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_add_gauge_basic PASSED [ 39%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_add_gauge_with_labels PASSED [ 39%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_add_counter_basic PASSED [ 39%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_add_counter_with_labels PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_add_histogram PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_add_histogram_with_labels PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_render_empty PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestMetricsCollector::test_render_multiple_metrics PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestGetWorkerMetrics::test_get_worker_metrics_redis_error PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestGetPlatformMetrics::test_get_platform_metrics_empty PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestGetApiMetrics::test_get_api_metrics_empty PASSED [ 40%]
backend/tests/unit/test_metrics_routes.py::TestPrometheusMetricsEndpoint::test_metrics_endpoint PASSED [ 40%]
backend/tests/unit/test_middleware.py::TestRequestIDMiddleware::test_request_id_added_to_response PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRequestIDMiddleware::test_request_id_is_uuid PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRequestIDMiddleware::test_request_id_available_in_request_state PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRequestIDMiddleware::test_unique_request_ids PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddleware::test_request_within_limit PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddleware::test_health_endpoint_not_rate_limited PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_headers_present PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_remaining_decreases PASSED [ 41%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_exceeded PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddlewareClientId::test_get_client_id_with_bearer_token PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddlewareClientId::test_get_client_id_with_forwarded_header PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddlewareClientId::test_get_client_id_fallback_to_client_host PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestRateLimitMiddlewareClientId::test_get_client_id_no_client PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestSecurityHeadersMiddleware::test_security_headers_added PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestSecurityHeadersMiddleware::test_hsts_header_value PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestSecurityHeadersMiddleware::test_docs_endpoint_skipped PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_get_user_by_id_found PASSED [ 42%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_get_user_by_id_not_found PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_create_access_token PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_get_current_user_valid_token PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_get_current_user_invalid_token PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_get_current_user_expired_token PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestAuthMiddleware::test_get_current_user_user_not_found PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_insufficient_credits_error PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_quota_exceeded_error_alias PASSED [ 43%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_credit_costs_defined PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_get_user_credits_success PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_get_user_credits_not_found PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_check_credits_sufficient PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_check_credits_insufficient PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_check_credits_trend_analysis PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_deduct_credits_success PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_deduct_credits_insufficient PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_add_credits_success PASSED [ 44%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_add_credits_without_payment_id PASSED [ 45%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_add_credits_user_not_found PASSED [ 45%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_legacy_check_copy_quota PASSED [ 45%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_legacy_get_user_quota PASSED [ 45%]
backend/tests/unit/test_middleware.py::TestQuotaMiddleware::test_legacy_increment_quota PASSED [ 45%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_user_model_instantiation PASSED [ 45%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_user_model_all_fields PASSED [ 45%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_license_model_instantiation PASSED [ 45%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_license_device_model_instantiation PASSED [ 45%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_product_model_instantiation PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_product_model_all_fields PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_copy_history_model_instantiation PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_payment_event_model_instantiation PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_payment_model_instantiation PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_payment_model_all_fields PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_scraping_job_model_instantiation PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelInstantiation::test_scraping_job_model_all_fields PASSED [ 46%]
backend/tests/unit/test_models.py::TestModelTableNames::test_user_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_license_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_license_device_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_product_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_copy_history_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_payment_event_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_payment_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelTableNames::test_scraping_job_table_name PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelRelationships::test_user_has_licenses_relationship PASSED [ 47%]
backend/tests/unit/test_models.py::TestModelRelationships::test_user_has_copy_history_relationship PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelRelationships::test_license_has_user_relationship PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelRelationships::test_license_has_devices_relationship PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelRelationships::test_license_device_has_license_relationship PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelRelationships::test_copy_history_has_user_relationship PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelColumns::test_user_email_is_unique PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelColumns::test_user_email_is_indexed PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelColumns::test_license_key_is_unique PASSED [ 48%]
backend/tests/unit/test_models.py::TestModelColumns::test_product_tiktok_id_is_unique PASSED [ 49%]
backend/tests/unit/test_models.py::TestModelColumns::test_product_has_sales_index PASSED [ 49%]
backend/tests/unit/test_models.py::TestModelDefaults::test_user_defaults PASSED [ 49%]
backend/tests/unit/test_models.py::TestModelDefaults::test_license_defaults PASSED [ 49%]
backend/tests/unit/test_models.py::TestModelDefaults::test_product_defaults PASSED [ 49%]
backend/tests/unit/test_models.py::TestModelDefaults::test_scraping_job_defaults PASSED [ 49%]
backend/tests/unit/test_models.py::TestBaseDeclarative::test_base_is_declarative PASSED [ 49%]
backend/tests/unit/test_models.py::TestBaseDeclarative::test_all_models_inherit_from_base PASSED [ 49%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_success PASSED [ 49%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_with_all_options PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_strips_whitespace PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_includes_metadata PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_get_system_prompt_instagram PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_get_system_prompt_tiktok PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_get_system_prompt_facebook PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_get_system_prompt_whatsapp PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_get_system_prompt_general PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_get_system_prompt_includes_language PASSED [ 50%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_build_prompt_basic PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_build_prompt_with_benefits PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_build_prompt_with_custom_instructions PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_api_error PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_empty_response PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_different_tones PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_different_types PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_with_unicode PASSED [ 51%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_with_zero_price PASSED [ 52%]
backend/tests/unit/test_openai_service.py::TestOpenAIService::test_generate_copy_with_very_long_title PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerSingleton::test_singleton_returns_same_instance PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerSingleton::test_singleton_maintains_state PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerInit::test_init_creates_connection PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerInit::test_init_skips_if_already_connected PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerInit::test_init_raises_on_connection_failure PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerClose::test_close_disconnects_database PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerClose::test_close_sets_database_to_none PASSED [ 52%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerDatabase::test_database_raises_when_not_initialized PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestPostgresManagerDatabase::test_database_returns_connection_when_initialized PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestModuleFunctions::test_init_db_calls_manager_init PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestModuleFunctions::test_close_db_calls_manager_close PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestModuleFunctions::test_get_database_returns_database PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_execute_query PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_execute_many PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_fetch_one PASSED [ 53%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_fetch_one_returns_none PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_fetch_all PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_fetch_val PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_begin_starts_transaction PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_commit_commits_transaction PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_rollback_rolls_back_transaction PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_context_manager_commits_on_success PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestDBSession::test_context_manager_rollback_on_exception PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestRepository::test_repository_requires_table_name PASSED [ 54%]
backend/tests/unit/test_postgres_shared.py::TestRepository::test_repository_with_table_name PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestInsufficientCreditsError::test_error_basic_message PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestInsufficientCreditsError::test_error_with_credits_info PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestInsufficientCreditsError::test_quota_exceeded_is_alias PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestCreditCosts::test_copy_costs_one_credit PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestCreditCosts::test_trend_analysis_costs_two_credits PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestCreditCosts::test_niche_report_costs_five_credits PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestGetUserCredits::test_get_credits_success PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestGetUserCredits::test_get_credits_user_not_found PASSED [ 55%]
backend/tests/unit/test_quota_middleware.py::TestGetUserCredits::test_get_credits_null_values PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestCheckCredits::test_check_credits_sufficient PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestCheckCredits::test_check_credits_insufficient PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestCheckCredits::test_check_credits_high_cost_action PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestCheckCredits::test_check_credits_unknown_action PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestDeductCredits::test_deduct_credits_success PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestDeductCredits::test_deduct_credits_insufficient PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestDeductCredits::test_deduct_credits_trend_analysis PASSED [ 56%]
backend/tests/unit/test_quota_middleware.py::TestAddCredits::test_add_credits_success PASSED [ 57%]
backend/tests/unit/test_quota_middleware.py::TestAddCredits::test_add_credits_with_payment_id PASSED [ 57%]
backend/tests/unit/test_quota_middleware.py::TestAddCredits::test_add_credits_user_not_found PASSED [ 57%]
backend/tests/unit/test_quota_middleware.py::TestLegacyFunctions::test_check_copy_quota PASSED [ 57%]
backend/tests/unit/test_quota_middleware.py::TestLegacyFunctions::test_get_user_quota PASSED [ 57%]
backend/tests/unit/test_quota_middleware.py::TestLegacyFunctions::test_increment_quota PASSED [ 57%]
backend/tests/unit/test_redis_service.py::test_redis_pool_singleton PASSED [ 57%]
backend/tests/unit/test_redis_service.py::test_redis_pool_get_instance PASSED [ 57%]
backend/tests/unit/test_redis_service.py::test_redis_pool_custom_url PASSED [ 57%]
backend/tests/unit/test_redis_service.py::test_redis_pool_close PASSED   [ 58%]
backend/tests/unit/test_redis_service.py::test_redis_pool_close_when_not_initialized PASSED [ 58%]
backend/tests/unit/test_redis_service.py::test_get_redis_pool PASSED     [ 58%]
backend/tests/unit/test_redis_service.py::test_close_redis_pool PASSED   [ 58%]
backend/tests/unit/test_redis_service.py::test_redis_pool_reconnect_after_close PASSED [ 58%]
backend/tests/unit/test_scheduler_routes.py::test_schedule_post_invalid_platform PASSED [ 58%]
backend/tests/unit/test_scheduler_routes.py::test_schedule_post_past_date PASSED [ 58%]
backend/tests/unit/test_scheduler_routes.py::test_schedule_post_success PASSED [ 58%]
backend/tests/unit/test_scheduler_routes.py::test_list_scheduled_posts PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_list_scheduled_posts_invalid_status PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_cancel_post_success PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_cancel_post_not_found PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_get_scheduler_stats PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_get_dlq_posts PASSED   [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_get_dlq_stats PASSED   [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_retry_dlq_post_success PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_retry_dlq_post_not_found PASSED [ 59%]
backend/tests/unit/test_scheduler_routes.py::test_retry_dlq_post_unauthorized PASSED [ 60%]
backend/tests/unit/test_scheduler_routes.py::test_retry_dlq_post_failure PASSED [ 60%]
backend/tests/unit/test_scheduler_routes.py::test_retry_all_dlq_posts PASSED [ 60%]
backend/tests/unit/test_scheduler_routes.py::test_delete_all_dlq_posts PASSED [ 60%]
backend/tests/unit/test_scraper_service.py::TestFormatProduct::test_format_product_basic PASSED [ 60%]
backend/tests/unit/test_scraper_service.py::TestFormatProduct::test_format_product_with_json_images PASSED [ 60%]
backend/tests/unit/test_scraper_service.py::TestFormatProduct::test_format_product_with_json_metadata PASSED [ 60%]
backend/tests/unit/test_scraper_service.py::TestFormatProduct::test_format_product_invalid_json_images PASSED [ 60%]
backend/tests/unit/test_scraper_service.py::TestGetRedisPool::test_get_redis_pool_success PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetProducts::test_get_products_basic PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetProducts::test_get_products_with_filters PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetProducts::test_get_products_invalid_sort PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorSearchProducts::test_search_products_basic PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorSearchProducts::test_search_products_empty_results PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorTrendingProducts::test_get_trending_products_basic PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorTrendingProducts::test_get_trending_products_with_category PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorCategories::test_get_categories_success PASSED [ 61%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetProductById::test_get_product_by_id_found PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetProductById::test_get_product_by_id_not_found PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorEnqueueJob::test_enqueue_refresh_job_success PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetJobStatus::test_get_job_status_found PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorGetJobStatus::test_get_job_status_not_found PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorSaveProducts::test_save_products_empty_list PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorSaveProducts::test_save_products_success PASSED [ 62%]
backend/tests/unit/test_scraper_service.py::TestScraperOrchestratorSaveProducts::test_save_products_large_batch PASSED [ 62%]
backend/tests/unit/test_status_webhooks.py::TestWebhookConfig::test_webhook_config_creation PASSED [ 62%]
backend/tests/unit/test_status_webhooks.py::TestWebhookConfig::test_webhook_config_with_secret PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestWebhookEvent::test_webhook_event_creation PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestWebhookEvent::test_webhook_event_serialization PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestMetricsCollector::test_hmac_signature_generation PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestWebhookDelivery::test_send_webhook_success PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestWebhookDelivery::test_send_webhook_failure PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestWebhookDelivery::test_send_webhook_timeout PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestTriggerEvent::test_trigger_event_no_webhooks PASSED [ 63%]
backend/tests/unit/test_status_webhooks.py::TestTriggerEvent::test_trigger_event_inactive_webhook PASSED [ 64%]
backend/tests/unit/test_status_webhooks.py::TestListWebhooks::test_list_webhooks_empty PASSED [ 64%]
backend/tests/unit/test_status_webhooks.py::TestListWebhooks::test_list_webhooks_with_data PASSED [ 64%]
backend/tests/unit/test_status_webhooks.py::TestCreateWebhook::test_create_webhook PASSED [ 64%]
backend/tests/unit/test_status_webhooks.py::TestGetWebhook::test_get_webhook_found PASSED [ 64%]
backend/tests/unit/test_status_webhooks.py::TestGetWebhook::test_get_webhook_not_found PASSED [ 64%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_create_template PASSED [ 64%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_get_template PASSED [ 64%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_get_template_not_found PASSED [ 64%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_list_templates PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_update_template PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_delete_template PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_render_template PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_render_without_hashtags PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateService::test_clone_template PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateRoutes::test_list_templates_endpoint PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateRoutes::test_get_default_templates PASSED [ 65%]
backend/tests/unit/test_templates_routes.py::TestTemplateRoutes::test_get_categories PASSED [ 66%]
backend/tests/unit/test_templates_routes.py::TestTemplateValidation::test_template_create_validation PASSED [ 66%]
backend/tests/unit/test_templates_routes.py::TestTemplateValidation::test_template_name_too_long PASSED [ 66%]
backend/tests/unit/test_templates_routes.py::TestTemplateValidation::test_template_caption_too_long PASSED [ 66%]
backend/tests/unit/test_templates_routes.py::TestTemplateValidation::test_template_too_many_hashtags PASSED [ 66%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_create_session PASSED [ 66%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_list_sessions_empty PASSED [ 66%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_list_sessions_with_data PASSED [ 66%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_upload_session_not_found PASSED [ 66%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_create_session_error PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_get_session_found PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_get_session_not_found PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_backup_session_success PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_backup_session_failure PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_restore_session_success PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_restore_session_no_backup PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_update_cookies_success PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_update_cookies_failure PASSED [ 67%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_delete_session_success PASSED [ 68%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_delete_session_failure PASSED [ 68%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_upload_success PASSED [ 68%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_upload_failure PASSED [ 68%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_upload_exception PASSED [ 68%]
backend/tests/unit/test_tiktok_routes.py::test_tiktok_upload_with_hashtags_and_privacy PASSED [ 68%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_save_session PASSED [ 68%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_session PASSED [ 68%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_session_not_found PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_cookies PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_mark_session_used PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_update_session_status PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_backup_session PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_backup_session_not_found PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_restore_session PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_restore_session_no_backup PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_delete_session PASSED [ 69%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_delete_session_with_backups PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_list_sessions PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_session_health_valid PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_session_health_expired PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_session_health_not_found PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_update_cookies PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSessionManager::test_get_stats PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSession::test_create_session_defaults PASSED [ 70%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSession::test_session_serialization PASSED [ 71%]
backend/tests/unit/test_tiktok_session.py::TestTikTokSession::test_session_deserialization PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_init PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_calculate_file_hash_file_exists PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_calculate_file_hash_file_not_found PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_calculate_file_hash_consistency PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_calculate_file_hash_different_content PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_verify_integrity_files_missing PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_verify_integrity_files_exist PASSED [ 71%]
backend/tests/unit/test_utils.py::TestIntegrityChecker::test_critical_files_list PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_init PASSED  [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_start_sets_running PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_stop_clears_running PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_check_debugger_allowed PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_check_debugger_no_debugger PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_check_debugger_trace_detected PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_check_debugger_env_var_detected PASSED [ 72%]
backend/tests/unit/test_utils.py::TestSecurityMonitor::test_check_debugger_vscode_detected PASSED [ 72%]
backend/tests/unit/test_webhooks.py::TestMercadoPagoWebhookPayload::test_webhook_payload_valid PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestVerifyMercadoPagoSignature::test_verify_signature_valid PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestVerifyMercadoPagoSignature::test_verify_signature_invalid PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestHandlePaymentEvent::test_handle_payment_created PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestHandlePaymentEvent::test_handle_payment_approved_license PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestHandlePaymentEvent::test_handle_payment_approved_credits PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestHandlePaymentEvent::test_handle_payment_cancelled PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestHandlePaymentEvent::test_handle_payment_refunded PASSED [ 73%]
backend/tests/unit/test_webhooks.py::TestHandlePaymentEvent::test_handle_payment_no_payment_id PASSED [ 74%]
backend/tests/unit/test_webhooks.py::TestHandleSubscriptionEvent::test_handle_subscription_created PASSED [ 74%]
backend/tests/unit/test_webhooks.py::TestHandleSubscriptionEvent::test_handle_subscription_updated_authorized PASSED [ 74%]
backend/tests/unit/test_webhooks.py::TestHandleSubscriptionEvent::test_handle_subscription_no_preapproval_id PASSED [ 74%]
backend/tests/unit/test_webhooks.py::TestMercadoPagoWebhookEndpoint::test_webhook_invalid_signature PASSED [ 74%]
backend/tests/unit/test_webhooks.py::TestMercadoPagoWebhookEndpoint::test_webhook_valid_payment_event PASSED [ 74%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppModels::test_instance_create_model PASSED [ 74%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppModels::test_instance_create_without_webhook PASSED [ 74%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppModels::test_message_send_model PASSED [ 74%]
backend/tests/unit/test_whatsapp_routes.py::TestGetWhatsAppClient::test_get_client_without_api_key PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestGetWhatsAppClient::test_get_client_success PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestCreateInstance::test_create_instance_success PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestCreateInstance::test_create_instance_with_default_webhook PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestCreateInstance::test_create_instance_error PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestGetQRCode::test_get_qrcode_success PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestGetQRCode::test_get_qrcode_error PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestSendMessage::test_send_message_success PASSED [ 75%]
backend/tests/unit/test_whatsapp_routes.py::TestSendMessage::test_send_message_instance_not_found PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestSendMessage::test_send_message_error PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppWebhook::test_webhook_no_instance PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppWebhook::test_webhook_instance_not_found PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppWebhook::test_webhook_messages_upsert_conversation PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppWebhook::test_webhook_messages_upsert_extended_text PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppWebhook::test_webhook_messages_empty_content PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestWhatsAppWebhook::test_webhook_other_event PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestListMessages::test_list_messages_success PASSED [ 76%]
backend/tests/unit/test_whatsapp_routes.py::TestListMessages::test_list_messages_instance_not_found PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestListMessages::test_list_messages_not_authorized PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestListMessages::test_list_messages_admin_access PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestScheduleReconnection::test_schedule_reconnection_first_attempt PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestScheduleReconnection::test_schedule_reconnection_increment_attempts PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestScheduleReconnection::test_schedule_reconnection_max_attempts PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestGetInstanceStatus::test_get_status_success PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestGetInstanceStatus::test_get_status_with_qr_code PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestGetInstanceStatus::test_get_status_with_reconnection_info PASSED [ 77%]
backend/tests/unit/test_whatsapp_routes.py::TestGetInstanceStatus::test_get_status_instance_not_found PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestGetInstanceStatus::test_get_status_not_authorized PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestForceReconnect::test_force_reconnect_success PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestForceReconnect::test_force_reconnect_api_error PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestForceReconnect::test_force_reconnect_not_found PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestForceReconnect::test_force_reconnect_not_authorized PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookConnectionUpdate::test_webhook_connection_update_connected PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookConnectionUpdate::test_webhook_connection_update_disconnected PASSED [ 78%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookConnectionUpdate::test_webhook_connection_update_connecting PASSED [ 79%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookConnectionUpdate::test_webhook_connection_update_error PASSED [ 79%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookConnectionUpdate::test_webhook_connection_update_unknown_state PASSED [ 79%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookQRCodeUpdate::test_webhook_qrcode_updated PASSED [ 79%]
backend/tests/unit/test_whatsapp_routes.py::TestWebhookQRCodeUpdate::test_webhook_qrcode_updated_empty PASSED [ 79%]
backend/tests/unit/test_youtube_routes.py::test_youtube_init_auth_no_creds PASSED [ 79%]
backend/tests/unit/test_youtube_routes.py::test_youtube_init_auth_success PASSED [ 79%]
backend/tests/unit/test_youtube_routes.py::test_youtube_init_auth_exception PASSED [ 79%]
backend/tests/unit/test_youtube_routes.py::test_youtube_list_accounts_empty PASSED [ 79%]
backend/tests/unit/test_youtube_routes.py::test_youtube_list_accounts_with_data PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_upload_no_token PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_get_quota_status_empty PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_get_quota_status_with_data PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_track_quota_new PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_track_quota_existing PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_quota_history_empty PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_quota_history_with_data PASSED [ 80%]
backend/tests/unit/test_youtube_routes.py::test_youtube_check_quota_alerts PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_postgres_manager_singleton PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_postgres_manager_init PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_postgres_manager_init_already_initialized PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_postgres_manager_init_failure PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_postgres_manager_close PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_postgres_manager_get_database_not_initialized PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_global_functions PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_get_db_context_manager PASSED [ 81%]
backend/tests/unit/shared/test_postgres.py::test_dbsession PASSED        [ 82%]
backend/tests/unit/shared/test_postgres.py::test_dbsession_rollback PASSED [ 82%]
backend/tests/unit/shared/test_postgres.py::test_repository_methods PASSED [ 82%]
backend/tests/unit/shared/test_postgres.py::test_execute_raw_fetch_raw PASSED [ 82%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_singleton PASSED [ 82%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_init PASSED  [ 82%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_init_failure PASSED [ 82%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_close PASSED [ 82%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_client_property_not_initialized PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_global_functions PASSED    [ 83%]
backend/tests/unit/shared/test_redis.py::test_get_redis_auto_init PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_connection_context_manager PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_cache PASSED         [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_incr_decr PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_expire_ttl PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_get_many PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_set_many PASSED [ 83%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_delete_pattern PASSED [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_queue PASSED         [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_queue_pop_with_timeout PASSED [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_queue_peek PASSED    [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_queue_clear PASSED   [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_lock PASSED          [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_lock_acquire_blocking PASSED [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_lock_acquire_blocking_timeout PASSED [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_lock_release_not_owned PASSED [ 84%]
backend/tests/unit/shared/test_redis.py::test_redis_pubsub PASSED        [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_pubsub_listen PASSED [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_pubsub_close PASSED  [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_pubsub_unsubscribe_not_connected PASSED [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_close_when_not_initialized PASSED [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_manager_init_already_initialized PASSED [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_delete_not_found PASSED [ 85%]
backend/tests/unit/shared/test_redis.py::test_redis_cache_exists_not_found PASSED [ 85%]
backend/tests/integration/test_auth_routes.py::TestLoginEndpoint::test_login_success PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestLoginEndpoint::test_login_invalid_credentials PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestLoginEndpoint::test_login_hwid_mismatch PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestRegisterEndpoint::test_register_success PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestRegisterEndpoint::test_register_email_exists PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestRefreshEndpoint::test_refresh_success PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestRefreshEndpoint::test_refresh_hwid_mismatch PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestRefreshEndpoint::test_refresh_user_not_found PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestRefreshEndpoint::test_refresh_invalid_token PASSED [ 86%]
backend/tests/integration/test_auth_routes.py::TestMeEndpoint::test_me_success PASSED [ 87%]
backend/tests/integration/test_auth_routes.py::TestMeEndpoint::test_me_unauthorized PASSED [ 87%]
backend/tests/integration/test_auth_routes.py::TestLogoutEndpoint::test_logout_success PASSED [ 87%]
backend/tests/integration/test_copy_routes.py::TestGenerateCopy::test_generate_copy_success PASSED [ 87%]
backend/tests/integration/test_copy_routes.py::TestGenerateCopy::test_generate_copy_from_cache PASSED [ 87%]
backend/tests/integration/test_copy_routes.py::TestGenerateCopy::test_generate_copy_insufficient_credits PASSED [ 87%]
backend/tests/integration/test_copy_routes.py::TestGenerateCopy::test_generate_copy_with_all_options PASSED [ 87%]
backend/tests/integration/test_copy_routes.py::TestCreditsEndpoints::test_get_credits PASSED [ 87%]
backend/tests/integration/test_copy_routes.py::TestCreditsEndpoints::test_get_quota PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestHistoryEndpoints::test_get_history PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestHistoryEndpoints::test_get_history_with_pagination PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestTemplatesEndpoints::test_get_templates PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestTemplatesEndpoints::test_apply_template PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestTemplatesEndpoints::test_apply_template_not_found PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestTemplatesEndpoints::test_apply_template_missing_variable PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestTemplatesEndpoints::test_create_custom_template PASSED [ 88%]
backend/tests/integration/test_copy_routes.py::TestTemplatesEndpoints::test_delete_template PASSED [ 88%]
backend/tests/integration/test_integrations_api.py::TestTypebotConversationFlow::test_complete_conversation_flow PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestTypebotConversationFlow::test_conversation_with_variables PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestN8nWorkflowFlow::test_workflow_execution_flow PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestN8nWorkflowFlow::test_workflow_management_flow PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestSystemIntegration::test_typebot_to_n8n_flow PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestSystemIntegration::test_deal_alert_pipeline PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestErrorRecovery::test_typebot_session_recovery PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestErrorRecovery::test_n8n_workflow_retry PASSED [ 89%]
backend/tests/integration/test_integrations_api.py::TestPerformanceScenarios::test_batch_workflow_execution PASSED [ 89%]
backend/tests/integration/test_integrations_routes.py::TestN8nIntegration::test_list_workflows PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestN8nIntegration::test_trigger_workflow PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestN8nIntegration::test_get_execution PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestN8nIntegration::test_trigger_webhook PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestTypebotIntegration::test_start_chat PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestTypebotIntegration::test_send_message PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestTypebotIntegration::test_set_variable PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestTypebotIntegration::test_get_session PASSED [ 90%]
backend/tests/integration/test_integrations_routes.py::TestTypebotIntegration::test_get_session_not_found PASSED [ 91%]
backend/tests/integration/test_integrations_routes.py::TestConfigEndpoints::test_get_config PASSED [ 91%]
backend/tests/integration/test_integrations_routes.py::TestConfigEndpoints::test_update_config PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_validate_license_success PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_validate_license_not_found PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_validate_license_expired PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_validate_license_device_not_registered PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_activate_license_first_time PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_activate_license_add_device PASSED [ 91%]
backend/tests/integration/test_license_routes.py::test_activate_license_max_devices_reached PASSED [ 92%]
backend/tests/integration/test_license_routes.py::test_deactivate_device PASSED [ 92%]
backend/tests/integration/test_license_routes.py::test_get_license_status PASSED [ 92%]
backend/tests/integration/test_license_routes.py::test_get_plans PASSED  [ 92%]
backend/tests/integration/test_license_routes.py::TestLicenseEdgeCases::test_free_plan_max_one_device PASSED [ 92%]
backend/tests/integration/test_license_routes.py::TestLicenseEdgeCases::test_invalid_license_key_format PASSED [ 92%]
backend/tests/integration/test_license_routes.py::TestLicenseEdgeCases::test_license_key_not_found PASSED [ 92%]
backend/tests/integration/test_products_routes.py::test_get_products_cached PASSED [ 92%]
backend/tests/integration/test_products_routes.py::test_get_products_uncached PASSED [ 93%]
backend/tests/integration/test_products_routes.py::test_search_products PASSED [ 93%]
backend/tests/integration/test_products_routes.py::test_get_trending_products PASSED [ 93%]
backend/tests/integration/test_products_routes.py::test_get_categories PASSED [ 93%]
backend/tests/integration/test_products_routes.py::test_get_product_by_id_found PASSED [ 93%]
backend/tests/integration/test_products_routes.py::test_get_product_by_id_not_found PASSED [ 93%]
backend/tests/integration/test_products_routes.py::test_refresh_products_success PASSED [ 93%]
backend/tests/integration/test_scraper_integration.py::TestFormatProduct::test_format_product_with_string_images PASSED [ 93%]
backend/tests/integration/test_scraper_integration.py::TestFormatProduct::test_format_product_with_invalid_images_json PASSED [ 93%]
backend/tests/integration/test_scraper_integration.py::TestFormatProduct::test_format_product_with_none_images PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestFormatProduct::test_format_product_with_already_parsed_data PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_save_products_empty_list PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_save_products_single_product PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_save_products_batch_processing PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_save_products_upsert_on_conflict PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_products_all_filters_combined PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_products_invalid_sort_column_fallback PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_products_sort_order_asc PASSED [ 94%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_products_has_more_pagination PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_products_no_filters PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_search_products_basic PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_search_products_pagination PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_trending_products PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_trending_products_no_category PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_categories PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_product_by_id_found PASSED [ 95%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_product_by_id_not_found PASSED [ 96%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_enqueue_refresh_job PASSED [ 96%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_job_status_found PASSED [ 96%]
backend/tests/integration/test_scraper_integration.py::TestScraperOrchestratorIntegration::test_get_job_status_not_found PASSED [ 96%]
backend/tests/integration/test_social_auth_routes.py::TestTokenEncryption::test_encrypt_decrypt_token PASSED [ 96%]
backend/tests/integration/test_social_auth_routes.py::TestTokenEncryption::test_different_users_different_encryption PASSED [ 96%]
backend/tests/integration/test_social_auth_routes.py::TestOAuthInit::test_init_oauth_success PASSED [ 96%]
backend/tests/integration/test_social_auth_routes.py::TestOAuthInit::test_init_oauth_invalid_platform PASSED [ 96%]
backend/tests/integration/test_social_auth_routes.py::TestOAuthInit::test_init_oauth_unconfigured PASSED [ 96%]
backend/tests/integration/test_social_auth_routes.py::TestOAuthCallback::test_callback_invalid_state PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestOAuthCallback::test_callback_error_parameter PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestTokenRefresh::test_refresh_not_found PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestConnectedAccounts::test_list_accounts_empty PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestConnectedAccounts::test_disconnect_account PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestConnectedAccounts::test_disconnect_nonexistent PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestGetAccessToken::test_get_token_not_found PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestGetAccessToken::test_get_token_success PASSED [ 97%]
backend/tests/integration/test_social_auth_routes.py::TestPlatformsList::test_list_platforms PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestAPIHealth::test_health_check_returns_response PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestAPIHealth::test_health_without_auth PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestAPISearch::test_search_returns_response PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestCacheStats::test_cache_stats_returns_response PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestCacheClear::test_cache_clear_returns_response PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestTrendingEndpoint::test_trending_returns_response PASSED [ 98%]
backend/tests/integration/test_tiktok_api_endpoints.py::TestRefreshEndpoint::test_refresh_returns_response PASSED [ 98%]
backend/tests/integration/test_webhooks_routes.py::TestMercadoPagoWebhook::test_webhook_invalid_signature PASSED [ 98%]
backend/tests/integration/test_webhooks_routes.py::TestMercadoPagoWebhook::test_webhook_payment_created PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestMercadoPagoWebhook::test_webhook_payment_approved_new_license PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestMercadoPagoWebhook::test_webhook_payment_approved_existing_license PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestMercadoPagoWebhook::test_webhook_payment_credits PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestSubscriptionEvents::test_webhook_subscription_created PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestSubscriptionEvents::test_webhook_subscription_cancelled PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestWebhookValidation::test_webhook_missing_signature_header PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestWebhookValidation::test_webhook_empty_payload PASSED [ 99%]
backend/tests/integration/test_webhooks_routes.py::TestWebhookValidation::test_webhook_unknown_event_type PASSED [100%]

=============================== warnings summary ===============================
backend/venv/lib/python3.12/site-packages/_pytest/config/__init__.py:1373
  /home/jhonslife/Didin Facil/backend/venv/lib/python3.12/site-packages/_pytest/config/__init__.py:1373: PytestConfigWarning: Unknown config option: env
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

backend/tests/unit/shared/test_postgres.py:138
  /home/jhonslife/Didin Facil/backend/tests/unit/shared/test_postgres.py:138: PytestCollectionWarning: cannot collect test class 'TestRepo' because it has a __init__ constructor (from: tests/unit/shared/test_postgres.py)
    class TestRepo(Repository):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name                                        Stmts   Miss  Cover   Missing
-------------------------------------------------------------------------
backend/api/__init__.py                         0      0   100%
backend/api/database/__init__.py                0      0   100%
backend/api/database/connection.py             30      0   100%
backend/api/database/models.py                151      0   100%
backend/api/main.py                            76     19    75%   38, 45-76, 195, 201
backend/api/middleware/__init__.py              0      0   100%
backend/api/middleware/auth.py                 34      0   100%
backend/api/middleware/metrics.py              52     27    48%   33, 51-52, 56-68, 83-96, 107-117
backend/api/middleware/quota.py                45      0   100%
backend/api/middleware/ratelimit.py            39      0   100%
backend/api/middleware/request_id.py           11      0   100%
backend/api/middleware/security.py             14      0   100%
backend/api/models/__init__.py                  0      0   100%
backend/api/routes/__init__.py                  2      0   100%
backend/api/routes/accounts.py                253     49    81%   209, 216, 218, 222, 224-227, 238, 261, 298, 311, 355-357, 395, 411-415, 432-438, 447-450, 460-467, 476-479, 491-495, 504-511, 521-528
backend/api/routes/analytics.py               182      0   100%
backend/api/routes/analytics_social.py        101     64    37%   59-69, 105-117, 165-176, 188-200, 218-230, 244-258, 275-289, 300-310, 335-352
backend/api/routes/api_docs.py                 58      0   100%
backend/api/routes/auth.py                     68      0   100%
backend/api/routes/automation.py               94     56    40%   46-63, 74-79, 97-102, 113-118, 134-149, 160-169, 186-213, 225, 246-251, 277-295, 309-325, 338-353
backend/api/routes/bot.py                     157      1    99%   203
backend/api/routes/chatbot.py                  87     46    47%   54-76, 87-107, 118-123, 138-155, 166-171, 184-194, 206-208, 226-233, 245-251, 261-263, 269-272
backend/api/routes/chatwoot.py                 44      2    95%   32-37
backend/api/routes/checkout.py                106      0   100%
backend/api/routes/content.py                  99     20    80%   122-123, 180, 194-197, 255, 269-272, 281-292, 302
backend/api/routes/copy.py                     94      0   100%
backend/api/routes/instagram.py               226     37    84%   176, 484-547, 559-580
backend/api/routes/integrations.py            133     24    82%   68-77, 98-99, 130-131, 155-156, 180-181, 188-197, 243-244, 288-289, 313-314, 381, 385
backend/api/routes/license.py                  99      6    94%   90, 178, 186, 235, 248, 264
backend/api/routes/marketplaces.py            124      7    94%   20-26, 106
backend/api/routes/metrics.py                 173     51    71%   88-100, 108-115, 138, 150, 156-157, 173, 179-181, 184-185, 203, 207, 211, 216-220, 382-392, 410-420
backend/api/routes/products.py                118      7    94%   147-148, 180-181, 202, 224, 249
backend/api/routes/scheduler.py               204     54    74%   107-158, 243-246, 248, 250, 252, 307, 309, 311, 313, 417-418, 425-426, 432-435, 462-463, 470-471, 478-479, 494-510
backend/api/routes/social_auth.py             199     69    65%   191-193, 234-316, 346-401, 429-441, 519, 523-532
backend/api/routes/status_webhooks.py         134     38    72%   137-156, 162-168, 174-187, 198-202, 220-225, 251-254, 296-299, 307
backend/api/routes/subscription.py             88     37    58%   75, 85-93, 120-122, 138-155, 166-171, 188-211, 229-231, 252-259
backend/api/routes/templates.py               230     52    77%   145-147, 174-175, 179, 189-190, 208-221, 236, 243, 245, 247, 249, 251, 253, 283, 315, 462-463, 489-492, 502-509, 518-521, 535-544, 554-562
backend/api/routes/tiktok.py                  226     82    64%   306-308, 388-408, 443-475, 507-542, 565-579, 605-634, 660-707
backend/api/routes/webhooks.py                147     44    70%   87, 214-218, 228-251, 266-289, 298, 311-332, 338
backend/api/routes/whatsapp.py                160      0   100%
backend/api/routes/youtube.py                 150     33    78%   154-233
backend/api/services/__init__.py                0      0   100%
backend/api/services/auth.py                   66     14    79%   148-160, 164-176, 192-196, 209
backend/api/services/blacklist.py              14      0   100%
backend/api/services/cache.py                 120     14    88%   100, 104, 222-225, 229-232, 244, 248, 254, 260
backend/api/services/instagram_session.py     244     30    88%   170, 264, 269-271, 301-303, 313, 322-324, 364-366, 379-381, 393, 411-413, 429, 442-444, 451, 465-467
backend/api/services/license.py               107     20    81%   257, 268-270, 328-354, 364-373, 378-389, 423, 456
backend/api/services/mercadopago.py            69     16    77%   107-137, 213-255, 298
backend/api/services/openai.py                 61     13    79%   207-216, 223-233, 243-244, 269-281
backend/api/services/redis.py                  19      0   100%
backend/api/services/scraper.py               109      0   100%
backend/api/services/tiktok_session.py        202     40    80%   96-98, 115-117, 132, 148, 162-164, 177, 192-194, 223-225, 248, 263-265, 287-289, 309-311, 381, 398-400, 414, 423, 426-429, 438-440
backend/api/utils/integrity.py                 27      0   100%
backend/api/utils/security.py                  35      5    86%   25-30
backend/shared/__init__.py                      4      0   100%
backend/shared/config.py                       95      1    99%   149
backend/shared/postgres.py                    140     20    86%   82, 181-185, 229-240, 244-253, 300-305
backend/shared/redis.py                       194     15    92%   70-71, 81-83, 87-88, 92-93, 97-98, 359-362
backend/shared/sentry.py                      139     75    46%   37, 47, 52, 62-63, 66-67, 112-114, 127, 137, 150, 154-157, 177, 181, 200-210, 229-237, 253-263, 267-269, 273-275, 293-296, 318-323, 333-334, 346-367, 372-373
backend/shared/storage.py                     105     72    31%   44, 54-73, 78, 86-93, 114-153, 170-207, 223-236, 253-269, 286-309
-------------------------------------------------------------------------
TOTAL                                        5958   1160    81%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml
Coverage JSON written to file coverage.json

======================= 859 passed, 2 warnings in 13.38s =======================
Sentry is attempting to send 2 pending events
Waiting up to 2 seconds
Press Ctrl-C to quit
